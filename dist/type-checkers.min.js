!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.TypeCheckers={})}(this,function(e){"use strict";function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function r(e,t){return e(t={exports:{}},t.exports),t.exports}var n=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.singleValueFactory=((e=null,t=(e=>e))=>{let r=e;return{getDefault:()=>e,get:()=>r,set:(n=e)=>{r=t(n)}}}),t.valuesMapFactory=((e=new Map,t=((e,t)=>t))=>{const r=new Map(e),n=()=>new Map(r),s=n();return{values:s,getDefault:n,copy:()=>new Map(s),delete:e=>s.delete(e),has:e=>s.has(e),set:(e,r)=>s.set(e,t(e,r)),get:e=>s.get(e)}}),t.valuesSetFactory=((e=new Set,t=(e=>e))=>{const r=new Set(e),n=()=>new Set(r),s=n();return{values:s,getDefault:n,get:()=>new Set(s),delete:e=>s.delete(e),has:e=>s.has(e),add:e=>s.add(t(e))}})});t(n);var s=n.singleValueFactory,a=n.valuesMapFactory;n.valuesSetFactory;const{get:o,set:c}=s(),{get:u,set:i}=s(!0,e=>!!e);var l=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=e=>{if(null==e)return;const t=Object.getPrototypeOf(e);return"object"==typeof t?t.constructor:t};t.getClassName=(e=>{if(!e)return"";const t=String(r(e)).match(/^(?:[^\(\{\s]*)(?:class|function)\s+([\w\d_$]+)(?:\s*\(|\s*\{|\s+extends)/);return t?t[1]:""}),t.getParentClass=(e=>{const t=r(e);return t&&Object.getPrototypeOf(t)}),t.getClass=r,t.default=r});t(l);l.getClassName,l.getParentClass;var h=l.getClass;const p=new Set,d=(...e)=>{e.forEach(e=>{e&&!p.has(e)&&p.add(e)})},f=e=>p.has(h(e));d(Map,Set,Date,Error);const{getDefault:g,set:y,get:m}=a([["wrapFunctionReturnValues",!0],["wrapFunctionArguments",!1],["wrapSetPropertyValues",!1],["ignorePrototypeMethods",!1]],(e,t)=>!!t),v=(e,t)=>{let r;return t&&(r=t[e]),void 0===r?m(e):r};var w=r(function(e,t){function r(e){if(!(this instanceof r))return new r(e);this.value=e}function n(){return this.value}Object.defineProperty(t,"__esModule",{value:!0}),r.prototype.toString=n,r.prototype.valueOf=n,r.prototype[Symbol.toPrimitive]=n;const s=(e,t)=>{const n=String(e)||"";return t instanceof r?`${n}${t}`:"symbol"==typeof t?`${n}[${String(t)}]`:String(parseInt(t,10))===t?`${n}[${t}]`:/^[a-z_$][\w\d$_]*$/i.test(t)?n?`${n}.${t}`:t:`${n}["${t}"]`};class a{constructor(e){this.value=e?String(e):"",this.lastName=void 0}append(e){this.value=s(this.value,e),this.lastName=e}appendCustomValue(e){this.value=s(this.value,r(e)),this.lastName=e}clone(e){const t=new a(this.value);return void 0===e?t.lastName=this.lastName:t.append(e),t}getLastName(){return this.lastName}toString(){return this.value}valueOf(){return this.value}}t.createPathSequence=(e=>new a(e)),t.default=a});t(w);var P=w.createPathSequence,C=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=(e=>(t,r)=>Boolean(t&&e.call(t,r)))(Object.prototype.hasOwnProperty);t.hasOwn=r,t.default=r}),b=t(C);C.hasOwn;const O=e=>`@${String(e)}`;class k{constructor(e){this.cache=e?{...e.cache}:{}}store(e,t){const r=O(e);t?this.cache[r]=t:delete this.cache[r]}get(e){return this.cache[O(e)]}has(e){return!!this.cache[O(e)]}remove(e,t){return delete this.cache[O(t)]}copy({cache:e}){return Object.keys(e).forEach(t=>{b(this.cache,t)?this.cache[t].copy(e[t]):this.cache[t]=e[t]}),this}}const S=e=>new k(e),j=Symbol("type-checkers::info"),F=e=>e?e[j]:void 0,V=(e,t)=>{e&&t&&(e[j]=t)};class _{constructor(e,t=null,r=!0,n=P(),s=S()){this.checker=e,this.data=t,this.deep=r,this.names=n,this.children=s}getChild(e){return this.children.get(e)}storeChildFrom(e,t){const r=F(t);r&&this.children.store(e,r)}createChildWithNames(e,t,r=null){const n=new _(this.checker,this.checker.init(t,r),this.deep,e);return this.children.store(e.lastName,n),n}createChild(e,t,r=null){return this.createChildWithNames(this.names.clone(e),t,r)}copy({deep:e,checker:t,children:r,data:n,names:s}){return this.checker===t?(this.deep=this.deep||e,this.children.copy(r),this.data=t.mergeConfigs(this.data,n,s)):console.error("TypeChecked objects can be merged only if using exactly same instance of type checker."),this}}var M=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=e=>"function"==typeof e;t.isFunction=r,t.default=r}),N=t(M),$=(M.isFunction,r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const{isFunction:r}=M,n=e=>{const{apply:t,construct:n}=e;delete e.apply,delete e.construct;const s={...e,construct:n,apply:t};return t=>new Proxy(t,r(t)?s:e)};t.withProxy=n,t.default=n})),x=t($);$.withProxy;const W=Symbol("type-checkers::target"),D=e=>"symbol"==typeof e,T=e=>Boolean(e&&e[W]),E=e=>(e=>{const t=typeof e;return Boolean(e)&&("function"===t||"object"===t)&&!f(e)})(e)&&!T(e),I=e=>(t,r)=>{const n=t[r];if(r===j)return n;if(r===W)return t;if(D(r))return t[r];const s=F(t),{names:a,data:o,checker:c}=s,u=a.clone(r);return c.getProperty&&c.getProperty(t,u,n,o),!E(n)||((e,t,r,n)=>!(!N(n)||b(e,r)||!v("ignorePrototypeMethods",t)))(t,s,r,n)?n:((e,t,r,n)=>{const s=F(t),{deep:a}=s;if(a||N(n)){const{lastName:t}=r,a=s.getChild(t);return e(n,a||s.createChildWithNames(r,n))}return n})(e,t,u,n)},A=(e,t)=>{let r=F(e);return r&&t&&r!==t?r.copy(t):r=t,e[j]=r,!0},R=e=>(t,r,n)=>{if(r===W)throw new Error(`"${W}" is a virtual property and cannot be set`);if(r===j)return A(t,n);if(D(r))return A(t,n);const s=F(t);return E(n)&&v("wrapSetPropertyValues",s)?((e,t,r,n)=>{const s=F(t),{names:a,checker:o,data:c}=s,u=s.getChild(r),i=u?u.names:a.clone(r);return o.setProperty&&o.setProperty(t,i,n,c),n=e(n,u||s.createChildWithNames(i,n)),t[r]=n,!0})(e,t,r,n):((e,t,r)=>{const{names:n,data:s,checker:a}=F(e);return a.setProperty&&a.setProperty(e,n.clone(t),r,s),e[t]=r,!0})(t,r,n)},B=(e,t,r,n)=>{if(!E(n))return n;const s=t.getChild(r);return e(n,s||t.createChild(r,n))},q=(e,t,r)=>{if(v("wrapFunctionArguments",t)){const{length:n}=r;for(let s=0;s<n;s++)r[s]=B(e,t,String(s),r[s])}return r},z=(e,{checker:t=o(),deep:r,name:n,data:s,children:a,info:c=null}={})=>c||((e,t,r,n,s)=>new _(e,t,r,n,s))(t,t.init(e,s),r,P(n),a),L=(e,t=null)=>({get:(!t||t.get)&&I(e),set:(!t||t.set)&&R(e),apply:(!t||t.apply)&&(e=>(t,r,n)=>{const s=F(t),{names:a,data:o,checker:c}=s;c.arguments&&c.arguments(t,a,n,o,r),v("wrapFunctionArguments",s)&&(n=q(e,s,n));let u=t.apply(r,n);return c.returnValue&&c.returnValue(t,a,u,o,r),v("wrapFunctionReturnValues",s)&&(u=B(e,s,"returnValue",u)),u})(e),construct:(!t||t.construct)&&(e=>(t,r)=>{const n=F(t),{names:s,data:a,checker:o}=n;o.arguments&&o.arguments(t,s,r,a),v("wrapFunctionArguments",n)&&(r=q(e,n,r));let c=new t(...r);return o.returnValue&&o.returnValue(t,s,c,a),v("wrapFunctionReturnValues",n)&&(c=B(e,n,"returnValue",c)),c})(e),deleteProperty:(!t||t.deleteProperty)&&(()=>(e,t)=>{if(t===j)return delete e[t];if(t===W)return!1;if(D(t))return delete e[t];const r=F(e),{names:n,data:s,checker:a}=r;return a.deleteProperty(e,n.clone(t),s),delete e[t]})()}),G=e=>{let t;const r=(e,r)=>(V(e,r),t(e)),n=L(r,e);return t=x(n),r},H=(e,t=null,r=null)=>{if(!E(e)||!u())return e;return G(r)(e,z(e,t||void 0))},J=(e,t)=>{const{names:r,checker:n,data:s}=t;return Object.keys(e).forEach(a=>{const o=e[a],c=r.clone(a);if(n.getProperty&&n.getProperty(e,c,o,s),E(o)){let e=t.getChild(a);e||(e=t.createChildWithNames(c,o)),J(o,e)}}),V(e,t),t},K=e=>e.find(T),Q=(...e)=>{const t=K(e);if(!t)return Object.assign({},...e);const r=F(t);return Object.assign(H({},{info:r}),...e)};Q.options=((e,...t)=>Q(H({},e),...t));const U=(e,...t)=>{if(T(e))return Object.assign(e,...t);const r=K(t);if(!r)return Object.assign(e,...t);const n=F(r);return Object.assign(H(e,{info:n}),...t)};U.options=((e,t,...r)=>U(H(t,e),...r)),e.getDefaultTypeChecker=o,e.setDefaultTypeChecker=c,e.isEnabled=u,e.setEnabled=i,e.addIgnoredClasses=d,e.isIgnoredClass=(e=>p.has(e)),e.isValueOfIgnoredClass=f,e.removeIgnoredClasses=((...e)=>{e.forEach(e=>p.delete(e))}),e.setWrapConfigValue=y,e.getWrapConfigValue=v,e.getTargetInfo=F,e.getTypeChecker=(e=>{if(e){const t=e[j];return t&&t.checker||void 0}}),e.getTypeCheckerData=(e=>{if(e){const t=e[j];return t&&t.data||void 0}}),e.removeTargetInfo=(e=>delete e[j]),e.wrap=H,e.wrapDeep=((e,t,r=null)=>{if(!E(e)||"object"!=typeof e||!u())return e;const n=G(r),s=z(e,t);return J(e,s),n(e,s)}),e.isWrappable=E,e.isWrapped=T,e.unwrap=(e=>e&&e[W]||e),e.setWrapConfigTo=((e,t,r)=>{if(!T(e))return!1;const n=F(e);switch(t){case"wrapFunctionReturnValues":case"wrapFunctionArguments":case"wrapSetPropertyValues":case"ignorePrototypeMethods":return n[t]=!!r,!0;default:return!1}}),e.assign=U,e.merge=Q,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=type-checkers.min.js.map
