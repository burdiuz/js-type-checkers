!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.TypeCheckers={})}(this,function(e){"use strict";function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function r(e,t){return e(t={exports:{}},t.exports),t.exports}var n=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=(e=>(t,r)=>Boolean(t&&e.call(t,r)))(Object.prototype.hasOwnProperty);t.hasOwn=r,t.default=r}),s=t(n);n.hasOwn;const o=(e=null,t)=>{let r=e;return{get:()=>r,set:(n=e)=>{r=t?t(n):n}}},{get:a,set:c}=o(),{get:i,set:u}=o(!0,e=>!!e);var l=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=e=>{if(null==e)return;const t=Object.getPrototypeOf(e);return"object"==typeof t?t.constructor:t};t.getClassName=(e=>{if(!e)return"";const t=String(r(e)).match(/^(?:[^\(\{\s]*)(?:class|function)\s+([\w\d_$]+)(?:\s*\(|\s*\{|\s+extends)/);return t?t[1]:""}),t.getParentClass=(e=>{const t=r(e);return t&&Object.getPrototypeOf(t)}),t.getClass=r,t.default=r});t(l);l.getClassName,l.getParentClass;var h=l.getClass;const p=new Set,d=(...e)=>{e.forEach(e=>{e&&!p.has(e)&&p.add(e)})},f=e=>p.has(h(e));d(Map,Set,Date,Error);const{values:g,getDefault:y,get:m,set:v,getValue:C}=((e={},t)=>{const r=()=>({...e}),n=r();return{values:n,getDefault:r,set:e=>Object.assign(n,t?t(e):e),get:()=>({...n}),getValue:e=>s(n,e)?n[e]:void 0}})({wrapFunctionReturnValues:!0,wrapFunctionArguments:!1,wrapSetPropertyValues:!1,ignorePrototypeMethods:!1},e=>Object.keys(e).forEach(t=>{e[t]=!!e[t]})),P=(e,t)=>{let r=t[e];return t&&(r=t[e]),void 0===r?C(e):r};var b=r(function(e,t){function r(e){if(!(this instanceof r))return new r(e);this.value=e}function n(){return this.value}Object.defineProperty(t,"__esModule",{value:!0}),r.prototype.toString=n,r.prototype.valueOf=n,r.prototype[Symbol.toPrimitive]=n;const s=(e,t)=>{const n=String(e)||"";return t instanceof r?`${n}${t}`:"symbol"==typeof t?`${n}[${String(t)}]`:String(parseInt(t,10))===t?`${n}[${t}]`:/^[a-z_$][\w\d$_]*$/i.test(t)?n?`${n}.${t}`:t:`${n}["${t}"]`};class o{constructor(e){this.value=e?String(e):"",this.lastName=void 0}append(e){this.value=s(this.value,e),this.lastName=e}appendCustomValue(e){this.value=s(this.value,r(e)),this.lastName=e}clone(e){const t=new o(this.value);return void 0===e?t.lastName=this.lastName:t.append(e),t}getLastName(){return this.lastName}toString(){return this.value}valueOf(){return this.value}}t.createPathSequence=(e=>new o(e)),t.default=o});t(b);var w=b.createPathSequence;const O=e=>`@${String(e)}`;class k{constructor(e){this.cache=e?{...e.cache}:{}}store(e,t){const r=O(e);t?this.cache[r]=t:delete this.cache[r]}get(e){return this.cache[O(e)]}has(e){return!!this.cache[O(e)]}remove(e,t){return delete this.cache[O(t)]}copy({cache:e}){return Object.keys(e).forEach(t=>{s(this.cache,t)?this.cache[t].copy(e[t]):this.cache[t]=e[t]}),this}}const j=e=>new k(e),S=Symbol("type-checkers::info"),V=e=>e?e[S]:void 0,_=(e,t)=>{e&&t&&(e[S]=t)};class N{constructor(e,t=null,r=!0,n=w(),s=j()){this.checker=e,this.data=t,this.deep=r,this.names=n,this.children=s}getChild(e){return this.children.get(e)}storeChildFrom(e,t){const r=V(t);r&&this.children.store(e,r)}createChildWithNames(e,t,r=null){const n=new N(this.checker,this.checker.init(t,r),this.deep,e);return this.children.store(e.lastName,n),n}createChild(e,t,r=null){return this.createChildWithNames(this.names.clone(e),t,r)}copy({deep:e,checker:t,children:r,data:n,names:s}){return this.checker===t?(this.deep=this.deep||e,this.children.copy(r),this.data=t.mergeConfigs(this.data,n,s)):console.error("TypeChecked objects can be merged only if using exactly same instance of type checker."),this}}var $=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=e=>"function"==typeof e;t.isFunction=r,t.default=r}),F=t($),x=($.isFunction,r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const{isFunction:r}=$,n=e=>{const{apply:t,construct:n}=e;delete e.apply,delete e.construct;const s={...e,construct:n,apply:t};return t=>new Proxy(t,r(t)?s:e)};t.withProxy=n,t.default=n})),M=t(x);x.withProxy;const W=Symbol("type-checkers::target"),E=e=>"symbol"==typeof e,T=e=>Boolean(e&&e[W]),D=e=>(e=>{const t=typeof e;return Boolean(e)&&("function"===t||"object"===t)&&!f(e)})(e)&&!T(e),I=["wrapFunctionArguments","wrapFunctionReturnValues","ignorePrototypeMethods","wrapSetPropertyValues"],A=e=>(t,r)=>{const n=t[r];if(r===S)return n;if(r===W)return t;if(E(r))return t[r];const o=V(t),{names:a,data:c,checker:i}=o,u=a.clone(r);return i.getProperty&&i.getProperty(t,u,n,c),!D(n)||((e,t,r,n)=>!(!F(n)||s(e,r)||!P("ignorePrototypeMethods",t)))(t,o,r,n)?n:((e,t,r,n)=>{const s=V(t),{deep:o}=s;if(o||F(n)){const{lastName:t}=r,o=s.getChild(t);return e(n,o||s.createChildWithNames(r,n))}return n})(e,t,u,n)},R=(e,t)=>{let r=V(e);return r&&t&&r!==t?r.copy(t):r=t,e[S]=r,!0},B=e=>(t,r,n)=>{if(r===W)throw new Error(`"${W}" is a virtual property and cannot be set`);if(r===S)return R(t,n);if(E(r))return R(t,n);const s=V(t);return D(n)&&P("wrapSetPropertyValues",s)?((e,t,r,n)=>{const s=V(t),{names:o,checker:a,data:c}=s,i=s.getChild(r),u=i?i.names:o.clone(r);return a.setProperty&&a.setProperty(t,u,n,c),n=e(n,i||s.createChildWithNames(u,n)),t[r]=n,!0})(e,t,r,n):((e,t,r)=>{const{names:n,data:s,checker:o}=V(e);return o.setProperty&&o.setProperty(e,n.clone(t),r,s),e[t]=r,!0})(t,r,n)},q=(e,t,r,n)=>{if(!D(n))return n;const s=t.getChild(r);return e(n,s||t.createChild(r,n))},z=(e,t,r)=>{if(P("wrapFunctionArguments",t)){const{length:n}=r;for(let s=0;s<n;s++)r[s]=q(e,t,String(s),r[s])}return r},L=(e,{checker:t=a(),deep:r,name:n,data:s,children:o,info:c=null}={})=>c||((e,t,r,n,s)=>new N(e,t,r,n,s))(t,t.init(e,s),r,w(n),o),G=(e,t=null)=>({get:(!t||t.get)&&A(e),set:(!t||t.set)&&B(e),apply:(!t||t.apply)&&(e=>(t,r,n)=>{const s=V(t),{names:o,data:a,checker:c}=s;c.arguments&&c.arguments(t,o,n,a,r),P("wrapFunctionArguments",s)&&(n=z(e,s,n));let i=t.apply(r,n);return c.returnValue&&c.returnValue(t,o,i,a,r),P("wrapFunctionReturnValues",s)&&(i=q(e,s,"returnValue",i)),i})(e),construct:(!t||t.construct)&&(e=>(t,r)=>{const n=V(t),{names:s,data:o,checker:a}=n;a.arguments&&a.arguments(t,s,r,o),P("wrapFunctionArguments",n)&&(r=z(e,n,r));let c=new t(...r);return a.returnValue&&a.returnValue(t,s,c,o),P("wrapFunctionReturnValues",n)&&(c=q(e,n,"returnValue",c)),c})(e),deleteProperty:(!t||t.deleteProperty)&&(()=>(e,t)=>{if(t===S)return delete e[t];if(t===W)return!1;if(E(t))return delete e[t];const r=V(e),{names:n,data:s,checker:o}=r;return o.deleteProperty(e,n.clone(t),s),delete e[t]})()}),H=e=>{let t;const r=(e,r)=>(_(e,r),t(e)),n=G(r,e);return t=M(n),r},J=(e,t=null,r=null)=>{if(!D(e)||!i())return e;return H(r)(e,L(e,t||void 0))},K=(e,t)=>{const{names:r,checker:n,data:s}=t;return Object.keys(e).forEach(o=>{const a=e[o],c=r.clone(o);if(n.getProperty&&n.getProperty(e,c,a,s),D(a)){let e=t.getChild(o);e||(e=t.createChildWithNames(c,a)),K(a,e)}}),_(e,t),t},Q=e=>e.find(T),U=(...e)=>{const t=Q(e);if(!t)return Object.assign({},...e);const r=V(t);return Object.assign(J({},{info:r}),...e)};U.options=((e,...t)=>U(J({},e),...t));const X=(e,...t)=>{if(T(e))return Object.assign(e,...t);const r=Q(t);if(!r)return Object.assign(e,...t);const n=V(r);return Object.assign(J(e,{info:n}),...t)};X.options=((e,t,...r)=>X(J(t,e),...r)),e.getDefaultTypeChecker=a,e.setDefaultTypeChecker=c,e.isEnabled=i,e.setEnabled=u,e.addIgnoredClasses=d,e.isIgnoredClass=(e=>p.has(e)),e.isValueOfIgnoredClass=f,e.removeIgnoredClasses=((...e)=>{e.forEach(e=>p.delete(e))}),e.getWrapConfig=m,e.setWrapConfig=v,e.getWrapConfigValue=P,e.getTargetInfo=V,e.getTypeChecker=(e=>{if(e){const t=e[S];return t&&t.checker||void 0}}),e.getTypeCheckerData=(e=>{if(e){const t=e[S];return t&&t.data||void 0}}),e.removeTargetInfo=(e=>delete e[S]),e.wrap=J,e.wrapDeep=((e,t,r=null)=>{if(!D(e)||"object"!=typeof e||!i())return e;const n=H(r),s=L(e,t);return K(e,s),n(e,s)}),e.isWrappable=D,e.isWrapped=T,e.unwrap=(e=>e&&e[W]||e),e.setWrapConfigTo=((e,t)=>{if(!T(e)||!t)return;const r=V(e);I.forEach(e=>{s(e,t)&&(r[e]=t[e])})}),e.assign=X,e.merge=U,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=type-checkers.min.js.map
